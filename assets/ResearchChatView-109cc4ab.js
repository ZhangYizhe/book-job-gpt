import{_ as J}from"./_records_2-079f7e39.js";import{h as R}from"./moment-fbc5633a.js";import{_ as x,m as h,l as O,q as P,o as l,c as i,a as s,n as c,t as p,F as b,g as C,p as $,e as Q}from"./index-268282a7.js";const a=m=>($("data-v-cc67cffc"),m=m(),Q(),m),I={class:"container"},M={class:"columns"},H=a(()=>s("span",null,"Random",-1)),B=[H],V={class:"column is-narrow"},j={class:"field has-addons"},L=a(()=>s("p",{class:"control"},[s("a",{class:"button is-static"}," Has Prompts ")],-1)),T={class:"control"},A=a(()=>s("span",null,"All",-1)),E=[A],F={class:"control"},q=a(()=>s("span",null,"Yes",-1)),z=[q],Y={class:c(["control"])},G=a(()=>s("span",null,"No",-1)),K=[G],U={class:"column is-narrow"},W={class:"field has-addons"},X=a(()=>s("p",{class:"control"},[s("a",{class:"button is-static"}," Choose Participant ID ")],-1)),Z={class:"control"},ss={class:"dropdown-trigger"},ts={key:0},os={key:1},es=a(()=>s("span",{class:"icon is-small"},[s("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1)),ns={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},as={class:"dropdown-content",style:{"max-height":"400px",overflow:"scroll"}},ls=["onClick"],is={class:"column"},cs={class:"field has-addons"},ds=a(()=>s("p",{class:"control"},[s("a",{class:"button is-static"}," Domain ")],-1)),us={class:"control"},rs=a(()=>s("span",null,"Book",-1)),_s=[rs],ps={class:c(["control"])},vs=a(()=>s("span",null,"Job",-1)),hs=[vs],ms={key:0,class:"container"},fs={class:"table mb-3"},bs=a(()=>s("thead",null,[s("tr",null,[s("td",null," Title "),s("td",null," Rate ")])],-1)),ks={class:"modal-card-head"},Cs={class:"modal-card-title"},ws={class:"modal-card-body"},gs={class:"columns is-multiline is-mobile",style:{padding:"10px"}},Ss={class:"title"},ys={class:"columns is-multiline is-mobile"},Ds={class:"column is-full"},Ns=["innerHTML"],Js={key:1,class:"container"},Rs=a(()=>s("p",null,"Please choose a participant ID first.",-1)),xs=[Rs],Os={__name:"ResearchChatView",setup(m){const k=h([]),g=O(()=>{let o=k.value;return o=o.filter(t=>u.value===null?!0:t.basic.isPrompts===u.value),o}),n=h(null),u=h(null),r=h(!0),v=h(!1);P(()=>{J.forEach((o,t)=>{o.__id__;const e=t+1,f=JSON.parse(o.basic),_=JSON.parse(o.chat);_.items=JSON.parse(_.items),_.itemsRates=JSON.parse(_.itemsRates),_.messages=JSON.parse(_.messages);const d=JSON.parse(o.data);d.interviewQuestionnaire=JSON.parse(d.interviewQuestionnaire),d.postQuestionnaires=JSON.parse(d.postQuestionnaires),d.preQuestionnaire=JSON.parse(d.preQuestionnaire),d.scenarioQuestionnaires=JSON.parse(d.scenarioQuestionnaires);const D=o.startDate,N=o.endDate;k.value.push({id:e,basic:f,chat:_,data:d,startDate:D,endDate:N})})});function S(){const o=Math.floor(Math.random()*100),t=k.value[o];w(t)}function w(o){n.value=null,n.value={id:o.id,isPrompts:o.basic.isPrompts,items:o.chat.items,itemsRates:o.chat.itemsRates,messages:o.chat.messages}}function y(o){return"<p style='text-align: right; color: darkgray'>"+R.unix(o).format("HH:mm")+"</p>"}return(o,t)=>(l(),i(b,null,[s("div",{class:"section",onMouseup:t[6]||(t[6]=e=>v.value=!1)},[s("div",I,[s("div",M,[s("div",{class:"column is-narrow"},[s("div",{class:"field has-addons"},[s("p",{class:"control"},[s("button",{class:c(["button","is-link"]),onClick:S},B)])])]),s("div",V,[s("div",j,[L,s("p",T,[s("button",{class:c(["button",u.value===null?"is-link":""]),onClick:t[0]||(t[0]=e=>{u.value=null,n.value=null})},E,2)]),s("p",F,[s("button",{class:c(["button",u.value?"is-link":""]),onClick:t[1]||(t[1]=e=>{u.value=!0,n.value=null})},z,2)]),s("p",Y,[s("button",{class:c(["button",u.value===!1?"is-link":""]),onClick:t[2]||(t[2]=e=>{u.value=!1,n.value=null})},K,2)])])]),s("div",U,[s("div",W,[X,s("p",Z,[s("div",{class:c(["dropdown",v.value?"is-active":""])},[s("div",ss,[s("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:t[3]||(t[3]=e=>v.value=!v.value)},[n.value?(l(),i("span",ts,p(n.value.id),1)):(l(),i("span",os,"Choose")),es])]),s("div",ns,[s("div",as,[(l(!0),i(b,null,C(g.value,e=>(l(),i("a",{class:c(["dropdown-item",n.value!==null&&n.value.id===e.id?"is-active":""]),onClick:f=>w(e)},p(e.id),11,ls))),256))])])],2)])])]),s("div",is,[s("div",cs,[ds,s("p",us,[s("button",{class:c(["button",r.value?"is-link":""]),onClick:t[4]||(t[4]=e=>r.value=!0)},_s,2)]),s("p",ps,[s("button",{class:c(["button",r.value?"":"is-link"]),onClick:t[5]||(t[5]=e=>r.value=!1)},hs,2)])])])])])],32),s("div",{class:"section pt-0",onMouseup:t[7]||(t[7]=e=>v.value=!1)},[n.value?(l(),i("div",ms,[s("div",null,[s("table",fs,[bs,(l(!0),i(b,null,C(n.value.itemsRates[r.value?"book":"job"],(e,f)=>(l(),i("tr",null,[s("td",null,p(f),1),s("td",null,p(e),1)]))),256))])]),s("div",ks,[s("p",Cs,"Chat "+p(n.value.id)+" - "+p(n.value.isPrompts===!0?"Has Prompts":"No Prompts"),1)]),s("div",ws,[s("div",gs,[s("p",Ss,p(r.value?"book":"job"),1),s("div",ys,[(l(!0),i(b,null,C(n.value.messages[r.value?"book":"job"],e=>(l(),i("div",Ds,[s("div",{class:c([e.role==="assistant"?"receive-canvas":"send-canvas","normal-chat-content-canvas"]),innerHTML:e.content+y(e.time)},null,10,Ns)]))),256))])])])])):(l(),i("div",Js,xs))],32)],64))}},Is=x(Os,[["__scopeId","data-v-cc67cffc"]]);export{Is as default};
